<div class="resultados-container">
  <div class="header">
    <button class="btn-back" (click)="volverAlDashboard()">â† Volver</button>
    <h1>ğŸ¯ Mis Resultados Vocacionales</h1>
  </div>

  <!-- Indicador de progreso -->
  <div class="progreso-card">
    <h3>ğŸ“Š Tu Progreso</h3>
    <div class="progreso-items">
      <div class="progreso-item" [class.completo]="tieneNotas">
        <span class="icono">{{ tieneNotas ? 'âœ…' : 'â­•' }}</span>
        <span>Notas AcadÃ©micas</span>
      </div>
      <div class="progreso-item" [class.completo]="tieneTestHabilidades">
        <span class="icono">{{ tieneTestHabilidades ? 'âœ…' : 'â­•' }}</span>
        <span>Test de Habilidades</span>
      </div>
      <div class="progreso-item" [class.completo]="tieneIntereses">
        <span class="icono">{{ tieneIntereses ? 'âœ…' : 'â­•' }}</span>
        <span>Intereses Vocacionales</span>
      </div>
    </div>
  </div>

  <!-- Cargando -->
  <div *ngIf="cargando" class="loading">
    <div class="spinner"></div>
    <p>Calculando tus resultados...</p>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="error-box">
    <p>âš ï¸ {{ error }}</p>
    <button class="btn-retry" (click)="verificarProgresoYCargarResultados()">Reintentar</button>
  </div>

  <!-- Progreso incompleto -->
  <div *ngIf="!cargando && !error && !progresoCompleto" class="incomplete-box">
    <h2>âš ï¸ Proceso Incompleto</h2>
    <p>Para obtener tus resultados vocacionales, necesitas completar todos los pasos:</p>
    
    <div class="pasos-pendientes">
      <div class="paso" *ngIf="!tieneNotas">
        <span class="numero">1</span>
        <div class="contenido">
          <h4>Registrar Notas AcadÃ©micas</h4>
          <p>Ingresa tus calificaciones en las materias</p>
          <button class="btn-accion" (click)="irANotas()">Ir a Notas</button>
        </div>
      </div>

      <div class="paso" *ngIf="!tieneTestHabilidades">
        <span class="numero">2</span>
        <div class="contenido">
          <h4>Completar Test de Habilidades</h4>
          <p>Responde preguntas sobre tus capacidades</p>
          <button class="btn-accion" (click)="irATest()">Ir a Test</button>
        </div>
      </div>

      <div class="paso" *ngIf="!tieneIntereses">
        <span class="numero">3</span>
        <div class="contenido">
          <h4>Definir Intereses Vocacionales</h4>
          <p>Indica quÃ© carreras te interesan</p>
          <button class="btn-accion" (click)="irAIntereses()">Ir a Intereses</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Resultados -->
  <div *ngIf="!cargando && !error && progresoCompleto && resultados.length > 0" class="resultados-lista">
    <h2>ğŸ† Top 3 Carreras Recomendadas</h2>
    <p class="formula-info">
      Calculado con: <strong>50% AcadÃ©mico + 30% Habilidades + 20% Intereses</strong>
    </p>

    <div class="carreras-grid">
      <div 
        *ngFor="let resultado of resultados; let i = index" 
        class="carrera-card"
        [class.primera]="i === 0"
        [class.segunda]="i === 1"
        [class.tercera]="i === 2"
      >
        <div class="medalla">{{ obtenerMedalla(i) }}</div>
        <div class="posicion">PosiciÃ³n {{ i + 1 }}</div>
        
        <h3>{{ resultado.carrera.nombre }}</h3>
        <p class="codigo">CÃ³digo: {{ resultado.carrera.codigo }}</p>
        <p class="descripcion">{{ resultado.carrera.descripcion }}</p>

        <div class="puntajes">
          <div class="puntaje-item">
            <span class="label">ğŸ“š AcadÃ©mico (50%):</span>
            <span class="valor">{{ resultado.puntajeAcademico.toFixed(2) }}</span>
          </div>
          <div class="puntaje-item">
            <span class="label">ğŸ’ª Habilidades (30%):</span>
            <span class="valor">{{ resultado.puntajeHabilidades.toFixed(2) }}</span>
          </div>
          <div class="puntaje-item">
            <span class="label">â¤ï¸ Intereses (20%):</span>
            <span class="valor">{{ resultado.puntajeAfinidad.toFixed(2) }}</span>
          </div>
          <div class="puntaje-total">
            <span class="label">ğŸ¯ Puntaje Total:</span>
            <span class="valor total">{{ resultado.puntajeTotal.toFixed(2) }}%</span>
          </div>
        </div>

        <div class="mensaje">{{ resultado.mensaje }}</div>
      </div>
    </div>
  </div>

  <!-- Sin resultados -->
  <div *ngIf="!cargando && !error && progresoCompleto && resultados.length === 0" class="no-resultados">
    <p>No se encontraron carreras recomendadas. Verifica tus datos.</p>
  </div>
</div>
