<div class="admin-container">
  <div class="header">
    <button class="btn-back" (click)="volverAlDashboard()">â† Volver</button>
    <h1>GestiÃ³n de Habilidades</h1>
    <button class="btn-nuevo" (click)="mostrarNuevoFormulario()" *ngIf="!mostrarFormulario">
      + Nueva Habilidad
    </button>
  </div>

  <div *ngIf="mensaje" class="mensaje-exito">{{ mensaje }}</div>
  <div *ngIf="error" class="mensaje-error">{{ error }}</div>

  <div *ngIf="mostrarFormulario" class="form-card">
    <h3>{{ modoEdicion ? 'Editar Habilidad' : 'Nueva Habilidad' }}</h3>
    <form (ngSubmit)="guardarHabilidad()" #habilidadForm="ngForm">
      <div class="form-group">
        <label for="nombre">Nombre *</label>
        <input 
          type="text" 
          id="nombre" 
          name="nombre"
          [(ngModel)]="nuevaHabilidad.nombre"
          (focus)="limpiarMensajes()"
          required
          placeholder="Ej: Razonamiento LÃ³gico"
          maxlength="100"
        >
      </div>

      <div class="form-group">
        <label for="descripcion">DescripciÃ³n *</label>
        <textarea 
          id="descripcion" 
          name="descripcion"
          [(ngModel)]="nuevaHabilidad.descripcion"
          (focus)="limpiarMensajes()"
          required
          rows="4"
          placeholder="Describe la habilidad y su importancia..."
          maxlength="500"
        ></textarea>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn-guardar" [disabled]="!habilidadForm.form.valid || guardando">
          {{ guardando ? 'Guardando...' : modoEdicion ? 'ğŸ’¾ Actualizar' : 'ğŸ’¾ Crear' }}
        </button>
        <button type="button" class="btn-cancelar" (click)="cancelarFormulario()">
          âŒ Cancelar
        </button>
      </div>
    </form>
  </div>

  <div class="tabla-card">
    <h3>Lista de Habilidades ({{ habilidades.length }})</h3>
    
    <div *ngIf="cargando" class="loading">Cargando habilidades...</div>

    <div *ngIf="!cargando && habilidades.length === 0" class="no-data">
      <p>ğŸ“ No hay habilidades registradas</p>
    </div>

    <table *ngIf="!cargando && habilidades.length > 0">
      <thead>
        <tr>
          <th>Nombre</th>
          <th>DescripciÃ³n</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let habilidad of habilidades">
          <td class="nombre">{{ habilidad.nombre }}</td>
          <td class="descripcion">{{ habilidad.descripcion }}</td>
          <td class="acciones">
            <button class="btn-editar" (click)="editarHabilidad(habilidad)">âœï¸ Editar</button>
            <button class="btn-eliminar" (click)="eliminarHabilidad(habilidad.id!, habilidad.nombre)">ğŸ—‘ï¸ Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="info-box">
    <p>ğŸ’¡ Cada habilidad puede tener mÃºltiples preguntas asociadas (GUSTO y AUTOEVALUACION).</p>
    <p>âš ï¸ Al eliminar una habilidad se eliminarÃ¡n tambiÃ©n sus preguntas.</p>
  </div>
</div>
